<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Employee Dashboard - QR Inventory System</title>
    <link rel="stylesheet" href="dashboard-modern.css">
    <link rel="stylesheet" href="transaction-history.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* Additional styles for existing functionality */
        .section-content {
            background: var(--white);
            border-radius: 16px;
            padding: 2rem;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.05);
        }
        
        .qr-result {
            margin-top: 2rem;
            padding: 2rem;
            background: linear-gradient(135deg, #f0fdf4 0%, #dcfce7 100%);
            border-radius: 12px;
            text-align: center;
            border: 2px solid var(--success);
        }
        
        #qr-display img {
            max-width: 100%;
            width: 280px;
            height: auto;
            border: 3px solid var(--dark);
            padding: 15px;
            background: var(--white);
            border-radius: 12px;
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
        }
        
        #reader {
            border: 3px solid var(--primary);
            border-radius: 12px;
            overflow: hidden;
            width: 100%;
            max-width: 400px;
            height: 400px;
            margin: 0 auto;
            background: var(--dark);
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1);
        }
        
        .scan-options {
            display: flex;
            gap: 1rem;
            margin: 2rem 0;
            justify-content: center;
            flex-wrap: wrap;
        }
        
        .btn {
            padding: 0.875rem 2rem;
            border: none;
            border-radius: 100px;
            cursor: pointer;
            font-size: 0.925rem;
            font-weight: 700;
            transition: var(--transition);
            text-transform: uppercase;
            letter-spacing: 0.5px;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
            min-width: 150px;
        }
        
        .btn-primary {
            background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
            color: var(--white);
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
        }
        
        .btn-primary:hover {
            transform: translateY(-3px);
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1);
        }
        
        .btn-success {
            background: linear-gradient(135deg, var(--success) 0%, #059669 100%);
            color: var(--white);
        }
        
        .btn-danger {
            background: linear-gradient(135deg, var(--danger) 0%, #dc2626 100%);
            color: var(--white);
        }
        
        .btn-secondary {
            background: var(--white);
            color: var(--primary);
            border: 2px solid var(--primary);
        }
        
        .form-group {
            margin-bottom: 1.5rem;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 600;
            color: var(--gray-700);
            font-size: 0.925rem;
        }
        
        .form-group input,
        .form-group select,
        .form-group textarea {
            width: 100%;
            padding: 0.875rem 1rem;
            border: 2px solid var(--gray-200);
            border-radius: 10px;
            font-size: 1rem;
            transition: var(--transition);
            background: var(--white);
        }
        
        .form-group input:focus,
        .form-group select:focus,
        .form-group textarea:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 4px rgba(99, 102, 241, 0.1);
        }

        /* Tailor Management Styles */
        .tailor-management-container {
            padding: 0;
            background: #f8fafc;
            min-height: 100vh;
        }

        .tailor-header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 2rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 2rem;
        }

        .header-content h2 {
            margin: 0 0 0.5rem 0;
            font-size: 1.875rem;
            font-weight: 700;
        }

        .header-subtitle {
            margin: 0;
            opacity: 0.9;
            font-size: 1rem;
        }

        .tailor-stats {
            display: flex;
            gap: 1.5rem;
            flex-wrap: wrap;
        }

        .stat-card.mini {
            background: rgba(255, 255, 255, 0.15);
            backdrop-filter: blur(10px);
            border-radius: 12px;
            padding: 1rem;
            display: flex;
            align-items: center;
            gap: 0.75rem;
            border: 1px solid rgba(255, 255, 255, 0.2);
            min-width: 140px;
        }

        .stat-card.mini .stat-icon {
            width: 40px;
            height: 40px;
            border-radius: 10px;
            background: rgba(255, 255, 255, 0.2);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.25rem;
        }

        .stat-info {
            display: flex;
            flex-direction: column;
        }

        .stat-number {
            font-size: 1.5rem;
            font-weight: 700;
            line-height: 1;
        }

        .stat-label {
            font-size: 0.75rem;
            opacity: 0.9;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .modern-tab-nav {
            background: white;
            border-bottom: 1px solid #e2e8f0;
            padding: 0 2rem;
        }

        .tab-buttons {
            display: flex;
            gap: 0;
        }

        .modern-tab-btn {
            background: none;
            border: none;
            padding: 1rem 1.5rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-size: 0.875rem;
            font-weight: 600;
            color: #64748b;
            cursor: pointer;
            border-bottom: 3px solid transparent;
            transition: all 0.3s ease;
            position: relative;
        }

        .modern-tab-btn:hover {
            color: #334155;
            background: #f8fafc;
        }

        .modern-tab-btn.active {
            color: #667eea;
            border-bottom-color: #667eea;
            background: #f8fafc;
        }

        .modern-tab-content {
            display: none;
            padding: 2rem;
        }

        .modern-tab-content.active {
            display: block;
        }

        .tab-section {
            background: white;
            border-radius: 12px;
            padding: 2rem;
            margin-bottom: 2rem;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
        }

        .section-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 2rem;
            flex-wrap: wrap;
            gap: 1rem;
        }

        .section-header h3 {
            margin: 0 0 0.5rem 0;
            font-size: 1.25rem;
            font-weight: 700;
            color: #1e293b;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .section-header p {
            margin: 0;
            color: #64748b;
            font-size: 0.875rem;
        }

        .section-actions {
            display: flex;
            align-items: center;
            gap: 1rem;
            flex-wrap: wrap;
        }

        .modern-form {
            display: flex;
            flex-direction: column;
            gap: 1.5rem;
        }

        .form-row {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 1.5rem;
        }

        .form-group.full-width {
            grid-column: 1 / -1;
        }

        .modern-form .form-group label {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            margin-bottom: 0.75rem;
            font-weight: 600;
            color: #374151;
            font-size: 0.875rem;
        }

        .modern-form .form-group label i {
            color: #667eea;
            width: 16px;
        }

        .modern-form .form-group input,
        .modern-form .form-group select,
        .modern-form .form-group textarea {
            width: 100%;
            padding: 0.75rem 1rem;
            border: 2px solid #e2e8f0;
            border-radius: 8px;
            font-size: 0.875rem;
            transition: all 0.3s ease;
            background: #ffffff;
        }

        .modern-form .form-group input:focus,
        .modern-form .form-group select:focus,
        .modern-form .form-group textarea:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }

        .form-actions {
            display: flex;
            gap: 1rem;
            justify-content: flex-start;
            flex-wrap: wrap;
        }

        .btn-outline {
            background: white;
            color: #667eea;
            border: 2px solid #667eea;
        }

        .btn-outline:hover {
            background: #667eea;
            color: white;
        }

        .search-container {
            position: relative;
            min-width: 250px;
        }

        .search-container i {
            position: absolute;
            left: 0.75rem;
            top: 50%;
            transform: translateY(-50%);
            color: #9ca3af;
        }

        .search-container input {
            padding-left: 2.5rem;
            padding-right: 0.75rem;
            padding-top: 0.5rem;
            padding-bottom: 0.5rem;
            border: 2px solid #e2e8f0;
            border-radius: 8px;
            font-size: 0.875rem;
            width: 100%;
            transition: all 0.3s ease;
        }

        .search-container input:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }

        .filter-group select {
            padding: 0.5rem 2rem 0.5rem 0.75rem;
            border: 2px solid #e2e8f0;
            border-radius: 8px;
            font-size: 0.875rem;
            background: white;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .filter-group select:focus {
            outline: none;
            border-color: #667eea;
        }

        .modern-table-container {
            background: white;
            border-radius: 8px;
            overflow: hidden;
            border: 1px solid #e2e8f0;
        }

        /* Enhanced Responsive Design */
        @media (max-width: 1024px) {
            .form-row {
                grid-template-columns: 1fr;
                gap: 1rem;
            }

            .tailor-stats {
                gap: 1rem;
            }

            .stat-card.mini {
                min-width: 120px;
            }
        }

        @media (max-width: 768px) {
            /* Header adjustments */
            .tailor-header {
                flex-direction: column;
                align-items: flex-start;
                padding: 1.5rem 1rem;
                gap: 1.5rem;
            }

            .header-content h2 {
                font-size: 1.5rem;
            }

            .header-subtitle {
                font-size: 0.875rem;
            }

            .tailor-stats {
                width: 100%;
                justify-content: space-between;
                flex-wrap: nowrap;
                overflow-x: auto;
                padding-bottom: 0.5rem;
                -webkit-overflow-scrolling: touch;
            }

            .stat-card.mini {
                flex: 1;
                min-width: 100px;
                padding: 0.75rem;
            }

            .stat-card.mini .stat-icon {
                width: 32px;
                height: 32px;
                font-size: 1rem;
            }

            .stat-number {
                font-size: 1.25rem;
            }

            .stat-label {
                font-size: 0.625rem;
            }

            /* Tab navigation */
            .modern-tab-nav {
                padding: 0;
                overflow-x: auto;
                -webkit-overflow-scrolling: touch;
            }

            .tab-buttons {
                display: flex;
                min-width: max-content;
                padding: 0 1rem;
            }

            .modern-tab-btn {
                white-space: nowrap;
                padding: 0.875rem 1rem;
                font-size: 0.8125rem;
                min-width: auto;
            }

            .modern-tab-btn span {
                display: none;
            }

            .modern-tab-btn i {
                margin-right: 0;
            }

            /* Content adjustments */
            .modern-tab-content {
                padding: 1rem;
            }

            .tab-section {
                padding: 1rem;
                margin-bottom: 1rem;
                border-radius: 8px;
            }

            .section-header {
                flex-direction: column;
                align-items: flex-start;
                gap: 1rem;
                margin-bottom: 1.5rem;
            }

            .section-header h3 {
                font-size: 1.125rem;
            }

            .section-actions {
                width: 100%;
                flex-direction: column;
                gap: 0.75rem;
            }

            .filter-group select {
                width: 100%;
                padding: 0.75rem;
            }

            .search-container {
                min-width: auto;
                width: 100%;
            }

            /* Form improvements */
            .form-row {
                grid-template-columns: 1fr;
                gap: 1rem;
            }

            .modern-form .form-group label {
                font-size: 0.8125rem;
            }

            .modern-form .form-group input,
            .modern-form .form-group select,
            .modern-form .form-group textarea {
                padding: 0.875rem 0.75rem;
                font-size: 0.9375rem;
            }

            .form-actions {
                flex-direction: column;
                gap: 0.75rem;
            }

            .form-actions .btn {
                width: 100%;
                justify-content: center;
            }

            /* Table responsiveness */
            .modern-table-container {
                overflow-x: auto;
                -webkit-overflow-scrolling: touch;
            }

            .modern-table-container table {
                min-width: 600px;
                font-size: 0.875rem;
            }

            .modern-table-container th,
            .modern-table-container td {
                padding: 0.75rem 0.5rem;
                white-space: nowrap;
            }

            .modern-table-container td:first-child {
                position: sticky;
                left: 0;
                background: white;
                z-index: 1;
                box-shadow: 2px 0 4px rgba(0,0,0,0.1);
            }

            .modern-table-container thead th:first-child {
                position: sticky;
                left: 0;
                background: #f8fafc;
                z-index: 2;
                box-shadow: 2px 0 4px rgba(0,0,0,0.1);
            }

            /* Button adjustments */
            .btn {
                padding: 0.75rem 1.5rem;
                font-size: 0.875rem;
            }

            .btn-outline {
                width: 100%;
            }
        }

        @media (max-width: 480px) {
            /* Extra small screens */
            .tailor-header {
                padding: 1rem 0.75rem;
            }

            .header-content h2 {
                font-size: 1.375rem;
            }

            .tailor-stats {
                gap: 0.5rem;
            }

            .stat-card.mini {
                padding: 0.5rem;
                min-width: 80px;
            }

            .stat-card.mini .stat-icon {
                width: 28px;
                height: 28px;
                font-size: 0.875rem;
            }

            .stat-number {
                font-size: 1.125rem;
            }

            .modern-tab-content {
                padding: 0.75rem;
            }

            .tab-section {
                padding: 0.75rem;
            }

            .section-header h3 {
                font-size: 1rem;
            }

            .modern-form .form-group input,
            .modern-form .form-group select,
            .modern-form .form-group textarea {
                padding: 0.75rem 0.625rem;
                font-size: 0.875rem;
            }

            /* Mobile-specific table layout */
            .modern-table-container {
                border-radius: 8px;
                overflow: hidden;
            }

            /* Card-based layout for very small screens */
            .mobile-card-layout {
                display: none;
            }

            @media (max-width: 400px) {
                .modern-table-container table {
                    display: none;
                }

                .mobile-card-layout {
                    display: block;
                }

                .mobile-card {
                    background: white;
                    border: 1px solid #e2e8f0;
                    border-radius: 8px;
                    padding: 1rem;
                    margin-bottom: 0.75rem;
                    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
                }

                .mobile-card-header {
                    font-weight: 600;
                    font-size: 0.9375rem;
                    margin-bottom: 0.5rem;
                    color: #1e293b;
                }

                .mobile-card-content {
                    display: flex;
                    flex-direction: column;
                    gap: 0.375rem;
                }

                .mobile-card-row {
                    display: flex;
                    justify-content: space-between;
                    align-items: center;
                    font-size: 0.875rem;
                }

                .mobile-card-label {
                    color: #64748b;
                    font-weight: 500;
                }

                .mobile-card-value {
                    color: #1e293b;
                    font-weight: 400;
                }

                .mobile-card-actions {
                    margin-top: 0.75rem;
                    padding-top: 0.75rem;
                    border-top: 1px solid #f1f5f9;
                    display: flex;
                    gap: 0.5rem;
                }

                .mobile-card-actions button {
                    flex: 1;
                    padding: 0.5rem;
                    font-size: 0.75rem;
                }
            }
        }

        /* Landscape orientation adjustments */
        @media (max-width: 768px) and (orientation: landscape) {
            .tailor-header {
                flex-direction: row;
                padding: 1rem;
            }

            .tailor-stats {
                width: auto;
                gap: 1rem;
            }

            .modern-tab-btn span {
                display: inline;
            }

            .modern-tab-content {
                padding: 1.5rem;
            }
        }

        /* Touch improvements */
        @media (hover: none) and (pointer: coarse) {
            .modern-tab-btn {
                min-height: 44px;
                padding: 0.875rem 1rem;
            }

            .btn {
                min-height: 44px;
                padding: 0.75rem 1.5rem;
            }

            .modern-form .form-group input,
            .modern-form .form-group select,
            .modern-form .form-group textarea {
                min-height: 44px;
                padding: 0.75rem;
            }

            /* Larger touch targets for buttons */
            .modern-table-container button {
                min-width: 44px;
                min-height: 44px;
                padding: 0.5rem;
            }
        }

        /* Accessibility improvements */
        @media (prefers-reduced-motion: reduce) {
            .modern-tab-btn,
            .btn,
            .modern-form .form-group input,
            .modern-form .form-group select,
            .modern-form .form-group textarea {
                transition: none;
            }
        }

        /* High contrast mode support */
        @media (prefers-contrast: high) {
            .stat-card.mini {
                border: 2px solid;
            }

            .modern-tab-btn.active {
                border-bottom-width: 4px;
            }

            .tab-section {
                border: 1px solid #e2e8f0;
            }
        }

        /* Mobile overlay for sidebar */
        @media (max-width: 768px) {
            .sidebar {
                z-index: 1001;
            }
            
            .sidebar.active::before {
                content: '';
                position: fixed;
                top: 0;
                left: 260px;
                right: 0;
                bottom: 0;
                background: rgba(0, 0, 0, 0.5);
                backdrop-filter: blur(4px);
                z-index: -1;
            }
            
            /* Ensure tailor management mobile responsiveness */
            .tailor-management-container {
                padding-top: 0;
            }
            
            /* Improve touch targets on mobile */
            .modern-tab-btn {
                min-height: 48px;
                touch-action: manipulation;
            }
            
            .btn {
                min-height: 44px;
                touch-action: manipulation;
            }
            
            /* Optimize form inputs for mobile */
            .form-group input,
            .form-group select,
            .form-group textarea {
                font-size: 16px; /* Prevents zoom on iOS */
            }
            
            /* Optimize table scrolling on mobile */
            .modern-table-container {
                -webkit-overflow-scrolling: touch;
                scroll-behavior: smooth;
            }
            
            /* Swipe gestures hint */
            .mobile-card {
                position: relative;
            }
            
            .mobile-card::after {
                content: '';
                position: absolute;
                bottom: 8px;
                right: 12px;
                width: 30px;
                height: 3px;
                background: #e2e8f0;
                border-radius: 2px;
                opacity: 0.6;
            }
        }
    </style>
</head>
<body>
    <div class="dashboard-container">
        <!-- Sidebar -->
        <aside class="sidebar">
            <div class="sidebar-header">
                <div class="logo">
                    <i class="fas fa-qrcode"></i>
                    <span>QR Inventory</span>
                </div>
            </div>
            
            <nav class="sidebar-nav">
                <a href="#" class="nav-item active" onclick="showSection('dashboard', event)">
                    <i class="fas fa-home"></i>
                    <span>Dashboard</span>
                </a>
                <a href="#" class="nav-item" onclick="showSection('create-product', event)">
                    <i class="fas fa-plus-circle"></i>
                    <span>Create Product</span>
                </a>
                <a href="#" class="nav-item" onclick="showSection('scan-qr', event)">
                    <i class="fas fa-qrcode"></i>
                    <span>Scan QR</span>
                </a>
                <a href="#" class="nav-item" onclick="showSection('inventory', event)">
                    <i class="fas fa-boxes"></i>
                    <span>Inventory</span>
                </a>
                <a href="#" class="nav-item" onclick="showSection('transactions', event)">
                    <i class="fas fa-history"></i>
                    <span>History</span>
                </a>
                <a href="#" class="nav-item" onclick="showSection('tailor-management', event)">
                    <i class="fas fa-user-tie"></i>
                    <span>Tailor Management</span>
                </a>
                <a href="#" class="nav-item" onclick="showSection('reports', event)">
                    <i class="fas fa-chart-line"></i>
                    <span>Reports</span>
                </a>
            </nav>
            
            <div class="sidebar-footer">
                <a href="admin.html" class="nav-item" id="admin-link" style="display: none;">
                    <i class="fas fa-user-shield"></i>
                    <span>Admin Portal</span>
                </a>
                <a href="login.html" class="nav-item">
                    <i class="fas fa-sign-out-alt"></i>
                    <span>Logout</span>
                </a>
            </div>
        </aside>
        
        <!-- Main Content -->
        <main class="main-content">
            <!-- Top Bar -->
            <header class="topbar">
                <div class="topbar-left">
                    <button class="menu-toggle" id="menu-toggle">
                        <i class="fas fa-bars"></i>
                    </button>
                    <h1 class="page-title">Dashboard</h1>
                </div>
                
                <div class="topbar-right">
                    <div class="search-box">
                        <i class="fas fa-search"></i>
                        <input type="text" placeholder="Search inventory..." id="global-search">
                    </div>
                    
                    <button class="topbar-btn">
                        <i class="fas fa-bell"></i>
                        <span class="badge">3</span>
                    </button>
                    
                    <div class="user-menu">
                        <img src="https://ui-avatars.com/api/?name=Employee&background=6366f1&color=fff" alt="User" class="user-avatar">
                        <span class="user-name" id="user-info">Employee</span>
                        <i class="fas fa-chevron-down"></i>
                    </div>
                </div>
            </header>
            
            <!-- Dashboard Content -->
            <div class="dashboard-content">
                <!-- Dashboard Section -->
                <div id="dashboard" class="section active">
                    <!-- Quick Stats -->
                    <div class="stats-row">
                        <div class="stat-card">
                            <div class="stat-icon" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);">
                                <i class="fas fa-box"></i>
                            </div>
                            <div class="stat-details">
                                <span class="stat-label">Total Items</span>
                                <span class="stat-value" id="total-items">0</span>
                                <span class="stat-change positive">
                                    <i class="fas fa-arrow-up"></i> Updated
                                </span>
                            </div>
                        </div>
                        
                        <div class="stat-card">
                            <div class="stat-icon" style="background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);">
                                <i class="fas fa-tags"></i>
                            </div>
                            <div class="stat-details">
                                <span class="stat-label">Product Types</span>
                                <span class="stat-value" id="product-types">0</span>
                                <span class="stat-change">
                                    <i class="fas fa-minus"></i> Stable
                                </span>
                            </div>
                        </div>
                        
                        <div class="stat-card">
                            <div class="stat-icon" style="background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);">
                                <i class="fas fa-exchange-alt"></i>
                            </div>
                            <div class="stat-details">
                                <span class="stat-label">Recent Transactions</span>
                                <span class="stat-value" id="recent-transactions">0</span>
                                <span class="stat-change positive">
                                    <i class="fas fa-arrow-up"></i> Active
                                </span>
                            </div>
                        </div>
                        
                        <div class="stat-card">
                            <div class="stat-icon" style="background: linear-gradient(135deg, #fa709a 0%, #fee140 100%);">
                                <i class="fas fa-exclamation-triangle"></i>
                            </div>
                            <div class="stat-details">
                                <span class="stat-label">Low Stock Items</span>
                                <span class="stat-value" id="low-stock">0</span>
                                <span class="stat-change negative">
                                    <i class="fas fa-arrow-down"></i> Alert
                                </span>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Charts Row -->
                    <div class="charts-row">
                        <div class="chart-card">
                            <div class="card-header">
                                <h3>Inventory Overview</h3>
                                <div class="card-actions">
                                    <select class="period-select">
                                        <option>This Week</option>
                                        <option>This Month</option>
                                        <option>This Year</option>
                                    </select>
                                </div>
                            </div>
                            <div class="card-body">
                                <canvas id="salesChart"></canvas>
                            </div>
                        </div>
                        
                        <div class="chart-card small">
                            <div class="card-header">
                                <h3>Stock Distribution</h3>
                            </div>
                            <div class="card-body">
                                <canvas id="stockChart"></canvas>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Summary Table -->
                    <div class="table-card">
                        <div class="card-header">
                            <h3>Inventory Summary</h3>
                            <div class="card-actions">
                                <button class="btn-text" onclick="showSection('inventory', event)">View All</button>
                            </div>
                        </div>
                        <div class="card-body">
                            <div id="inventory-summary"></div>
                        </div>
                    </div>
                    
                    <!-- Quick Actions -->
                    <div class="quick-actions">
                        <h3>Quick Actions</h3>
                        <div class="action-buttons">
                            <button class="action-btn" onclick="showSection('create-product', event)">
                                <i class="fas fa-plus"></i>
                                <span>Add Product</span>
                            </button>
                            <button class="action-btn" onclick="showSection('scan-qr', event)">
                                <i class="fas fa-qrcode"></i>
                                <span>Scan QR</span>
                            </button>
                            <button class="action-btn" onclick="exportReport()">
                                <i class="fas fa-file-export"></i>
                                <span>Export Report</span>
                            </button>
                            <button class="action-btn" onclick="syncData()">
                                <i class="fas fa-sync"></i>
                                <span>Sync Data</span>
                            </button>
                        </div>
                    </div>
                </div>
                
                <!-- Create Product Section -->
                <div id="create-product" class="section">
                    <iframe src="product-simple.html" style="width: 100%; height: calc(100vh - 70px); border: none;"></iframe>
                </div>
                
                <!-- Scan QR Section -->
                <div id="scan-qr" class="section">
                    <div class="section-content">
                        <h2>Scan QR Code</h2>
                        
                        <div class="scan-options">
                            <button onclick="startScanner()" class="btn btn-primary">Start Camera Scanner</button>
                            <button onclick="showManualEntry()" class="btn btn-secondary">Manual Entry</button>
                        </div>
                        
                        <div id="scanner-container" style="display: none;">
                            <div class="scanner-wrapper">
                                <p id="camera-info" style="text-align: center; color: #666; margin-bottom: 1rem;">
                                    Requesting camera permission...
                                </p>
                                <div class="reader-container">
                                    <div id="reader"></div>
                                </div>
                                <div id="camera-loading" style="text-align: center; padding: 2rem; display: none;">
                                    <div class="loading">
                                        <div class="spinner"></div>
                                        <p style="margin-top: 1rem;">Initializing camera...</p>
                                    </div>
                                </div>
                                <button onclick="stopScanner()" class="btn btn-danger" style="margin-top: 1rem; display: block; margin-left: auto; margin-right: auto;">Stop Scanner</button>
                            </div>
                        </div>
                        
                        <div id="manual-entry" style="display: none;">
                            <div class="form-group">
                                <label for="manual-product-id">Enter Product ID</label>
                                <input type="text" id="manual-product-id" placeholder="e.g., SHI-M-ABC123">
                            </div>
                        </div>
                        
                        <div id="scan-result" class="scan-result" style="display: none;">
                            <div id="product-details"></div>
                            
                            <h3>Update Inventory</h3>
                            <form id="inventory-action-form" class="form">
                                <div class="form-group">
                                    <label for="action">Action</label>
                                    <select id="action" required>
                                        <option value="">Select Action</option>
                                        <option value="IN">Add Items (Stock In)</option>
                                        <option value="OUT">Remove Items (Stock Out)</option>
                                    </select>
                                </div>
                                
                                <div class="form-group">
                                    <label for="quantity">Quantity</label>
                                    <input type="number" id="quantity" value="1" min="1" required>
                                </div>
                                
                                <div class="form-group">
                                    <label for="performed-by">Performed By</label>
                                    <input type="text" id="performed-by" placeholder="Enter your name">
                                </div>
                                
                                <div class="form-group">
                                    <label for="location">Location (Optional)</label>
                                    <input type="text" id="location" placeholder="e.g., Warehouse A">
                                </div>
                                
                                <div class="form-group">
                                    <label for="notes">Notes (Optional)</label>
                                    <textarea id="notes" rows="2"></textarea>
                                </div>
                                
                                <button type="submit" class="btn btn-primary">Update Inventory</button>
                            </form>
                        </div>
                    </div>
                </div>
                
                <!-- Inventory Section -->
                <div id="inventory" class="section">
                    <iframe src="inventory-advanced.html" style="width: 100%; height: calc(100vh - 70px); border: none;"></iframe>
                </div>
                
                <!-- Transactions Section -->
                <div id="transactions" class="section">
                    <div class="transaction-container">
                        <!-- Simple Header -->
                        <div class="transaction-header-simple">
                            <div class="header-left">
                                <h2>Transaction History</h2>
                                <span class="record-count" id="transaction-count">0 Records</span>
                            </div>
                        </div>
                        
                        <!-- Simple Filter Bar -->
                        <div class="transaction-filter-bar">
                            <!-- Search -->
                            <div class="search-box-trans">
                                <i class="fas fa-search"></i>
                                <input type="text" id="search-transactions" placeholder="Search transactions...">
                            </div>
                            
                            <!-- Type Filter -->
                            <div class="filter-inline">
                                <label class="mobile-label">Type:</label>
                                <select id="transaction-type-filter" class="inline-select" onchange="filterByTypeSelect(this.value)">
                                    <option value="all">All Types</option>
                                    <option value="in">Stock In</option>
                                    <option value="out">Stock Out</option>
                                    <option value="update">Updated</option>
                                    <option value="remove">Removed</option>
                                </select>
                            </div>
                            
                            <!-- Spacer -->
                            <div class="nav-spacer"></div>
                            
                            <!-- Show Entries -->
                            <div class="entries-inline">
                                <label>Show</label>
                                <select id="trans-per-page" class="inline-select" onchange="updateTransactionDisplay()">
                                    <option value="10">10</option>
                                    <option value="25">25</option>
                                    <option value="50">50</option>
                                    <option value="100">100</option>
                                </select>
                                <label class="entries-label">entries</label>
                            </div>
                        </div>
                        
                        <!-- Transaction Table -->
                        <div class="trans-table-wrapper">
                            <table class="trans-table">
                                <thead>
                                    <tr>
                                        <th>ID</th>
                                        <th>Date & Time</th>
                                        <th>Product</th>
                                        <th>Status</th>
                                        <th>Quantity</th>
                                        <th>Stock Level</th>
                                        <th>User</th>
                                    </tr>
                                </thead>
                                <tbody id="trans-tbody">
                                    <!-- Sample rows for demonstration -->
                                    <tr>
                                        <td>TRX-000001</td>
                                        <td>
                                            <div class="time-info">
                                                <span class="date">Dec 26, 2024</span>
                                                <span class="time">10:30 AM</span>
                                            </div>
                                        </td>
                                        <td>
                                            <div class="product-info">
                                                <span class="prod-name">Blue Cotton Shirt</span>
                                                <span class="prod-sku">BCS-M-001</span>
                                            </div>
                                        </td>
                                        <td>
                                            <span class="status-badge stock-in">
                                                <i class="fas fa-arrow-down"></i> Stock In
                                            </span>
                                        </td>
                                        <td class="qty-change positive">+50</td>
                                        <td>
                                            <span class="stock-before">100</span>
                                            <i class="fas fa-arrow-right"></i>
                                            <span class="stock-after">150</span>
                                        </td>
                                        <td>John Doe</td>
                                    </tr>
                                    <tr>
                                        <td>TRX-000002</td>
                                        <td>
                                            <div class="time-info">
                                                <span class="date">Dec 26, 2024</span>
                                                <span class="time">11:15 AM</span>
                                            </div>
                                        </td>
                                        <td>
                                            <div class="product-info">
                                                <span class="prod-name">Black Denim Jeans</span>
                                                <span class="prod-sku">BDJ-L-002</span>
                                            </div>
                                        </td>
                                        <td>
                                            <span class="status-badge stock-out">
                                                <i class="fas fa-arrow-up"></i> Stock Out
                                            </span>
                                        </td>
                                        <td class="qty-change negative">-20</td>
                                        <td>
                                            <span class="stock-before">80</span>
                                            <i class="fas fa-arrow-right"></i>
                                            <span class="stock-after">60</span>
                                        </td>
                                        <td>Jane Smith</td>
                                    </tr>
                                    <tr>
                                        <td>TRX-000003</td>
                                        <td>
                                            <div class="time-info">
                                                <span class="date">Dec 26, 2024</span>
                                                <span class="time">02:30 PM</span>
                                            </div>
                                        </td>
                                        <td>
                                            <div class="product-info">
                                                <span class="prod-name">Red Polo Shirt</span>
                                                <span class="prod-sku">RPS-S-003</span>
                                            </div>
                                        </td>
                                        <td>
                                            <span class="status-badge updated">
                                                <i class="fas fa-edit"></i> Updated
                                            </span>
                                        </td>
                                        <td class="qty-change neutral">0</td>
                                        <td>
                                            <span class="stock-before">45</span>
                                            <i class="fas fa-arrow-right"></i>
                                            <span class="stock-after">45</span>
                                        </td>
                                        <td>Mike Johnson</td>
                                    </tr>
                                </tbody>
                            </table>
                            
                            <!-- Empty State -->
                            <div class="trans-empty" id="trans-empty" style="display: none;">
                                <i class="fas fa-inbox"></i>
                                <h3>No Transactions Found</h3>
                                <p>Start scanning QR codes to track inventory movements</p>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Tailor Management Section -->
                <div id="tailor-management" class="section">
                    <div class="tailor-management-container">
                        <!-- Header with Stats -->
                        <div class="tailor-header">
                            <div class="header-content">
                                <h2><i class="fas fa-user-tie"></i> Tailor & Garment Management</h2>
                                <p class="header-subtitle">Manage tailors, assignments, and fabric inventory</p>
                            </div>
                            
                            <!-- Quick Stats -->
                            <div class="tailor-stats">
                                <div class="stat-card mini">
                                    <div class="stat-icon">
                                        <i class="fas fa-users"></i>
                                    </div>
                                    <div class="stat-info">
                                        <span class="stat-number" id="total-tailors">0</span>
                                        <span class="stat-label">Active Tailors</span>
                                    </div>
                                </div>
                                
                                <div class="stat-card mini">
                                    <div class="stat-icon">
                                        <i class="fas fa-tasks"></i>
                                    </div>
                                    <div class="stat-info">
                                        <span class="stat-number" id="pending-assignments">0</span>
                                        <span class="stat-label">Pending Work</span>
                                    </div>
                                </div>
                                
                                <div class="stat-card mini">
                                    <div class="stat-icon">
                                        <i class="fas fa-cut"></i>
                                    </div>
                                    <div class="stat-info">
                                        <span class="stat-number" id="fabric-types">0</span>
                                        <span class="stat-label">Fabric Types</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Modern Tab Navigation -->
                        <div class="modern-tab-nav">
                            <div class="tab-buttons">
                                <button class="modern-tab-btn active" data-tab="tailors-tab">
                                    <i class="fas fa-user-tie"></i>
                                    <span>Tailors</span>
                                </button>
                                <button class="modern-tab-btn" data-tab="assignments-tab">
                                    <i class="fas fa-clipboard-list"></i>
                                    <span>Work Assignments</span>
                                </button>
                                <button class="modern-tab-btn" data-tab="fabrics-tab">
                                    <i class="fas fa-cut"></i>
                                    <span>Fabric Inventory</span>
                                </button>
                            </div>
                        </div>
                        
                        <!-- Tailors Tab -->
                        <div id="tailors-tab" class="modern-tab-content active">
                            <div class="tab-section">
                                <div class="section-header">
                                    <h3><i class="fas fa-plus-circle"></i> Register New Tailor</h3>
                                    <p>Add a new tailor to your team</p>
                                </div>
                                
                                <form id="tailor-form" class="modern-form">
                                    <div class="form-row">
                                        <div class="form-group">
                                            <label for="tailor-name">
                                                <i class="fas fa-user"></i>
                                                Full Name
                                            </label>
                                            <input type="text" id="tailor-name" placeholder="Enter tailor's full name" required>
                                        </div>
                                        
                                        <div class="form-group">
                                            <label for="tailor-contact">
                                                <i class="fas fa-phone"></i>
                                                Contact Number
                                            </label>
                                            <input type="tel" id="tailor-contact" placeholder="+1 (555) 123-4567">
                                        </div>
                                    </div>
                                    
                                    <div class="form-row">
                                        <div class="form-group">
                                            <label for="tailor-email">
                                                <i class="fas fa-envelope"></i>
                                                Email Address
                                            </label>
                                            <input type="email" id="tailor-email" placeholder="tailor@example.com">
                                        </div>
                                        
                                        <div class="form-group">
                                            <label for="tailor-specialization">
                                                <i class="fas fa-star"></i>
                                                Specialization
                                            </label>
                                            <select id="tailor-specialization">
                                                <option value="">Select specialization</option>
                                                <option value="Shirts & Blouses">Shirts & Blouses</option>
                                                <option value="Pants & Trousers">Pants & Trousers</option>
                                                <option value="Formal Wear">Formal Wear</option>
                                                <option value="Dresses & Gowns">Dresses & Gowns</option>
                                                <option value="Alterations">Alterations</option>
                                                <option value="All Garments">All Garments</option>
                                            </select>
                                        </div>
                                    </div>
                                    
                                    <div class="form-actions">
                                        <button type="submit" class="btn btn-primary">
                                            <i class="fas fa-user-plus"></i>
                                            Register Tailor
                                        </button>
                                        <button type="reset" class="btn btn-secondary">
                                            <i class="fas fa-undo"></i>
                                            Reset Form
                                        </button>
                                    </div>
                                </form>
                            </div>
                            
                            <div class="tab-section">
                                <div class="section-header">
                                    <h3><i class="fas fa-users"></i> Registered Tailors</h3>
                                    <div class="section-actions">
                                        <div class="search-container">
                                            <i class="fas fa-search"></i>
                                            <input type="text" id="search-tailors" placeholder="Search tailors...">
                                        </div>
                                        <button class="btn btn-outline" onclick="exportTailors()">
                                            <i class="fas fa-download"></i>
                                            Export
                                        </button>
                                    </div>
                                </div>
                                
                                <div id="tailors-list" class="modern-table-container">
                                    <!-- Tailors will be loaded here -->
                                </div>
                            </div>
                        </div>
                        
                        <!-- Assignments Tab -->
                        <div id="assignments-tab" class="modern-tab-content">
                            <div class="tab-section">
                                <div class="section-header">
                                    <h3><i class="fas fa-plus-circle"></i> Create Work Assignment</h3>
                                    <p>Assign new work to tailors</p>
                                </div>
                                
                                <form id="assignment-form" class="modern-form">
                                    <div class="form-row">
                                        <div class="form-group">
                                            <label for="assignment-tailor">
                                                <i class="fas fa-user-tie"></i>
                                                Select Tailor
                                            </label>
                                            <select id="assignment-tailor" required>
                                                <option value="">Choose a tailor</option>
                                            </select>
                                        </div>
                                        
                                        <div class="form-group">
                                            <label for="assignment-priority">
                                                <i class="fas fa-flag"></i>
                                                Priority
                                            </label>
                                            <select id="assignment-priority">
                                                <option value="low">Low</option>
                                                <option value="medium" selected>Medium</option>
                                                <option value="high">High</option>
                                                <option value="urgent">Urgent</option>
                                            </select>
                                        </div>
                                    </div>
                                    
                                    <div class="form-row">
                                        <div class="form-group">
                                            <label for="garment-type">
                                                <i class="fas fa-tshirt"></i>
                                                Garment Type
                                            </label>
                                            <select id="garment-type" required>
                                                <option value="">Select garment type</option>
                                                <option value="Shirt">Shirt</option>
                                                <option value="T-Shirt">T-Shirt</option>
                                                <option value="Pants">Pants</option>
                                                <option value="Jacket">Jacket</option>
                                                <option value="Dress">Dress</option>
                                                <option value="Skirt">Skirt</option>
                                                <option value="Suit">Suit</option>
                                                <option value="Other">Other</option>
                                            </select>
                                        </div>
                                        
                                        <div class="form-group">
                                            <label for="fabric-type">
                                                <i class="fas fa-cut"></i>
                                                Fabric Type
                                            </label>
                                            <select id="fabric-type" required>
                                                <option value="">Select fabric</option>
                                                <option value="Cotton">Cotton</option>
                                                <option value="Silk">Silk</option>
                                                <option value="Polyester">Polyester</option>
                                                <option value="Wool">Wool</option>
                                                <option value="Linen">Linen</option>
                                                <option value="Denim">Denim</option>
                                                <option value="Mixed">Mixed</option>
                                                <option value="Other">Other</option>
                                            </select>
                                        </div>
                                    </div>
                                    
                                    <div class="form-row">
                                        <div class="form-group">
                                            <label for="assignment-quantity">
                                                <i class="fas fa-hashtag"></i>
                                                Quantity
                                            </label>
                                            <input type="number" id="assignment-quantity" min="1" value="1" required>
                                        </div>
                                        
                                        <div class="form-group">
                                            <label for="expected-date">
                                                <i class="fas fa-calendar-alt"></i>
                                                Due Date
                                            </label>
                                            <input type="date" id="expected-date">
                                        </div>
                                    </div>
                                    
                                    <div class="form-group full-width">
                                        <label for="assignment-notes">
                                            <i class="fas fa-sticky-note"></i>
                                            Special Instructions
                                        </label>
                                        <textarea id="assignment-notes" rows="3" placeholder="Add any special instructions or notes for the tailor..."></textarea>
                                    </div>
                                    
                                    <div class="form-actions">
                                        <button type="submit" class="btn btn-primary">
                                            <i class="fas fa-clipboard-check"></i>
                                            Create Assignment
                                        </button>
                                        <button type="reset" class="btn btn-secondary">
                                            <i class="fas fa-undo"></i>
                                            Reset Form
                                        </button>
                                    </div>
                                </form>
                            </div>
                            
                            <div class="tab-section">
                                <div class="section-header">
                                    <h3><i class="fas fa-clipboard-list"></i> Work Assignments</h3>
                                    <div class="section-actions">
                                        <div class="filter-group">
                                            <select id="assignment-status-filter">
                                                <option value="">All Status</option>
                                                <option value="pending">Pending</option>
                                                <option value="in-progress">In Progress</option>
                                                <option value="completed">Completed</option>
                                                <option value="cancelled">Cancelled</option>
                                            </select>
                                        </div>
                                        <div class="search-container">
                                            <i class="fas fa-search"></i>
                                            <input type="text" id="search-assignments" placeholder="Search assignments...">
                                        </div>
                                    </div>
                                </div>
                                
                                <div id="assignments-list" class="modern-table-container">
                                    <!-- Assignments will be loaded here -->
                                </div>
                            </div>
                        </div>
                        
                        <!-- Fabrics Tab -->
                        <div id="fabrics-tab" class="modern-tab-content">
                            <div class="tab-section">
                                <div class="section-header">
                                    <h3><i class="fas fa-plus-circle"></i> Add Fabric Stock</h3>
                                    <p>Manage your fabric inventory</p>
                                </div>
                                
                                <form id="fabric-form" class="modern-form">
                                    <div class="form-row">
                                        <div class="form-group">
                                            <label for="fabric-type-input">
                                                <i class="fas fa-cut"></i>
                                                Fabric Type
                                            </label>
                                            <input type="text" id="fabric-type-input" placeholder="e.g., Cotton Twill" required>
                                        </div>
                                        
                                        <div class="form-group">
                                            <label for="fabric-color">
                                                <i class="fas fa-palette"></i>
                                                Color
                                            </label>
                                            <input type="text" id="fabric-color" placeholder="e.g., Navy Blue">
                                        </div>
                                    </div>
                                    
                                    <div class="form-row">
                                        <div class="form-group">
                                            <label for="fabric-quantity">
                                                <i class="fas fa-ruler"></i>
                                                Quantity (meters)
                                            </label>
                                            <input type="number" id="fabric-quantity" step="0.1" min="0.1" placeholder="0.0" required>
                                        </div>
                                        
                                        <div class="form-group">
                                            <label for="fabric-width">
                                                <i class="fas fa-arrows-alt-h"></i>
                                                Width (inches)
                                            </label>
                                            <select id="fabric-width">
                                                <option value="36">36"</option>
                                                <option value="44" selected>44"</option>
                                                <option value="54">54"</option>
                                                <option value="60">60"</option>
                                                <option value="other">Other</option>
                                            </select>
                                        </div>
                                    </div>
                                    
                                    <div class="form-row">
                                        <div class="form-group">
                                            <label for="fabric-location">
                                                <i class="fas fa-map-marker-alt"></i>
                                                Storage Location
                                            </label>
                                            <input type="text" id="fabric-location" placeholder="e.g., Rack A1, Shelf 3">
                                        </div>
                                        
                                        <div class="form-group">
                                            <label for="fabric-supplier">
                                                <i class="fas fa-truck"></i>
                                                Supplier
                                            </label>
                                            <input type="text" id="fabric-supplier" placeholder="Supplier name">
                                        </div>
                                    </div>
                                    
                                    <div class="form-actions">
                                        <button type="submit" class="btn btn-primary">
                                            <i class="fas fa-plus"></i>
                                            Add Fabric Stock
                                        </button>
                                        <button type="reset" class="btn btn-secondary">
                                            <i class="fas fa-undo"></i>
                                            Reset Form
                                        </button>
                                    </div>
                                </form>
                            </div>
                            
                            <div class="tab-section">
                                <div class="section-header">
                                    <h3><i class="fas fa-cut"></i> Fabric Inventory</h3>
                                    <div class="section-actions">
                                        <div class="filter-group">
                                            <select id="fabric-type-filter">
                                                <option value="">All Types</option>
                                                <option value="Cotton">Cotton</option>
                                                <option value="Silk">Silk</option>
                                                <option value="Polyester">Polyester</option>
                                                <option value="Wool">Wool</option>
                                                <option value="Linen">Linen</option>
                                                <option value="Denim">Denim</option>
                                            </select>
                                        </div>
                                        <div class="search-container">
                                            <i class="fas fa-search"></i>
                                            <input type="text" id="search-fabrics" placeholder="Search fabrics...">
                                        </div>
                                    </div>
                                </div>
                                
                                <div id="fabrics-list" class="modern-table-container">
                                    <!-- Fabrics will be loaded here -->
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Reports Section -->
                <div id="reports" class="section">
                    <div class="section-content">
                        <h2>Reports & Analytics</h2>
                        <div class="charts-row">
                            <div class="chart-card">
                                <div class="card-header">
                                    <h3>Monthly Trends</h3>
                                </div>
                                <div class="card-body">
                                    <canvas id="trendsChart"></canvas>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>
    
    <!-- QR Code Scanner Library -->
    <script src="https://unpkg.com/html5-qrcode@2.3.8/html5-qrcode.min.js"></script>
    <script>
        if (typeof Html5Qrcode === 'undefined') {
            console.error('Html5Qrcode library failed to load from primary CDN, trying fallback...');
            var script = document.createElement('script');
            script.src = 'https://cdn.jsdelivr.net/npm/html5-qrcode@2.3.8/html5-qrcode.min.js';
            document.body.appendChild(script);
        }
    </script>
    
    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    
    <!-- Core Scripts -->
    <script src="api-service.js"></script>
    <script src="config.js"></script>
    <script src="tailor.js"></script>
    <script src="app.js"></script>
    
    <!-- Dashboard Integration Script -->
    <script>
        // Override showSection to work with new layout
        const originalShowSection = window.showSection;
        window.showSection = function(sectionId, event) {
            if (event) event.preventDefault();
            
            // Update sidebar active state
            document.querySelectorAll('.nav-item').forEach(item => {
                item.classList.remove('active');
            });
            
            // Find and activate the clicked nav item
            const clickedItem = event ? event.currentTarget : 
                document.querySelector(`.nav-item[onclick*="${sectionId}"]`);
            if (clickedItem) {
                clickedItem.classList.add('active');
            }
            
            // Update page title
            const pageTitle = document.querySelector('.page-title');
            const titles = {
                'dashboard': 'Dashboard',
                'create-product': 'Create Product',
                'scan-qr': 'Scan QR Code',
                'inventory': 'Inventory',
                'transactions': 'Transaction History',
                'tailor-management': 'Tailor Management',
                'reports': 'Reports & Analytics'
            };
            pageTitle.textContent = titles[sectionId] || 'Dashboard';
            
            // Call original function if it exists
            if (originalShowSection) {
                originalShowSection(sectionId, event);
            } else {
                // Hide all sections
                document.querySelectorAll('.section').forEach(section => {
                    section.classList.remove('active');
                    section.style.display = 'none';
                });
                
                // Show selected section
                const targetSection = document.getElementById(sectionId);
                if (targetSection) {
                    targetSection.classList.add('active');
                    targetSection.style.display = 'block';
                }
            }
        };
        
        // Handle sidebar toggle
        document.getElementById('menu-toggle').addEventListener('click', function() {
            const sidebar = document.querySelector('.sidebar');
            
            // Check if we're on mobile (max-width: 768px)
            if (window.innerWidth <= 768) {
                // On mobile, toggle 'active' class to show/hide sidebar
                sidebar.classList.toggle('active');
            } else {
                // On desktop, toggle 'collapsed' class to collapse/expand sidebar
                sidebar.classList.toggle('collapsed');
            }
        });

        // Handle responsive sidebar behavior on window resize
        window.addEventListener('resize', function() {
            const sidebar = document.querySelector('.sidebar');
            
            if (window.innerWidth > 768) {
                // On desktop, remove mobile 'active' class and show sidebar
                sidebar.classList.remove('active');
            } else {
                // On mobile, remove desktop 'collapsed' class and hide sidebar
                sidebar.classList.remove('collapsed');
                if (sidebar.classList.contains('active')) {
                    // Keep sidebar open if it was manually opened
                } else {
                    // Hide sidebar by default on mobile
                    sidebar.classList.remove('active');
                }
            }
        });

        // Close mobile sidebar when clicking outside
        document.addEventListener('click', function(event) {
            const sidebar = document.querySelector('.sidebar');
            const menuToggle = document.getElementById('menu-toggle');
            
            // Only handle on mobile and when sidebar is open
            if (window.innerWidth <= 768 && sidebar.classList.contains('active')) {
                // If click is outside sidebar and not on menu toggle
                if (!sidebar.contains(event.target) && !menuToggle.contains(event.target)) {
                    sidebar.classList.remove('active');
                }
            }
        });
        
        // Initialize charts when DOM is ready
        document.addEventListener('DOMContentLoaded', function() {
            // Initialize sales chart
            const salesCtx = document.getElementById('salesChart');
            if (salesCtx) {
                const gradient = salesCtx.getContext('2d').createLinearGradient(0, 0, 0, 300);
                gradient.addColorStop(0, 'rgba(99, 102, 241, 0.3)');
                gradient.addColorStop(1, 'rgba(99, 102, 241, 0.01)');
                
                new Chart(salesCtx, {
                    type: 'line',
                    data: {
                        labels: ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun'],
                        datasets: [{
                            label: 'Stock In',
                            data: [12, 19, 15, 25, 22, 30, 28],
                            borderColor: '#6366f1',
                            backgroundColor: gradient,
                            borderWidth: 3,
                            tension: 0.4,
                            fill: true
                        }, {
                            label: 'Stock Out',
                            data: [8, 12, 10, 18, 16, 22, 20],
                            borderColor: '#8b5cf6',
                            borderWidth: 3,
                            tension: 0.4,
                            fill: false
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: {
                                display: true,
                                position: 'bottom'
                            }
                        },
                        scales: {
                            y: {
                                beginAtZero: true
                            }
                        }
                    }
                });
            }
            
            // Initialize stock distribution chart
            const stockCtx = document.getElementById('stockChart');
            if (stockCtx) {
                new Chart(stockCtx, {
                    type: 'doughnut',
                    data: {
                        labels: ['Shirts', 'Pants', 'Jackets', 'T-Shirts', 'Others'],
                        datasets: [{
                            data: [30, 25, 20, 15, 10],
                            backgroundColor: [
                                '#6366f1',
                                '#8b5cf6',
                                '#ec4899',
                                '#f59e0b',
                                '#10b981'
                            ],
                            borderWidth: 0
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: {
                                position: 'bottom'
                            }
                        },
                        cutout: '70%'
                    }
                });
            }
            
            // Mobile responsiveness
            if (window.innerWidth <= 768) {
                document.querySelector('.sidebar').classList.add('collapsed');
            }
        });
        
        // Export function placeholder
        function exportReport() {
            alert('Exporting report...');
        }
        
        // Sync function placeholder
        function syncData() {
            alert('Syncing data...');
        }
        
        // ============= TRANSACTION HISTORY FUNCTIONALITY =============
        
        // Transaction storage
        let allTransactions = [];
        let filteredTransactions = [];
        let currentTransactionFilter = 'all';
        
        // Initialize transaction system
        function initTransactionSystem() {
            loadTransactionData();
            setupTransactionListeners();
            updateTransactionDisplay();
        }
        
        // Load transactions from localStorage
        function loadTransactionData() {
            const stored = localStorage.getItem('transaction_history');
            if (stored) {
                allTransactions = JSON.parse(stored);
                // Ensure dates are Date objects
                allTransactions = allTransactions.map(t => ({
                    ...t,
                    timestamp: new Date(t.timestamp)
                }));
            } else {
                // Generate sample data if none exists
                generateSampleTransactions();
            }
            filteredTransactions = [...allTransactions];
        }
        
        // Generate sample transactions for demo
        function generateSampleTransactions() {
            const products = [
                { name: 'Blue Cotton Shirt', sku: 'BCS-M-001' },
                { name: 'Black Denim Jeans', sku: 'BDJ-L-002' },
                { name: 'Red Polo Shirt', sku: 'RPS-S-003' },
                { name: 'Gray Hoodie', sku: 'GH-XL-004' },
                { name: 'White T-Shirt', sku: 'WTS-M-005' }
            ];
            
            const users = ['John Doe', 'Jane Smith', 'Mike Johnson', 'Sarah Williams'];
            const types = ['stock-in', 'stock-out', 'update', 'remove'];
            
            allTransactions = [];
            
            // Generate 15 sample transactions
            for (let i = 0; i < 15; i++) {
                const type = types[Math.floor(Math.random() * types.length)];
                const product = products[Math.floor(Math.random() * products.length)];
                const stockBefore = Math.floor(Math.random() * 150) + 50;
                const quantity = Math.floor(Math.random() * 30) + 1;
                
                let stockAfter = stockBefore;
                if (type === 'stock-in') {
                    stockAfter = stockBefore + quantity;
                } else if (type === 'stock-out' || type === 'remove') {
                    stockAfter = Math.max(0, stockBefore - quantity);
                }
                
                allTransactions.push({
                    id: `TRX-${String(i + 1).padStart(6, '0')}`,
                    type: type,
                    product: product,
                    quantity: quantity,
                    stockBefore: stockBefore,
                    stockAfter: stockAfter,
                    user: users[Math.floor(Math.random() * users.length)],
                    timestamp: new Date(Date.now() - Math.random() * 7 * 24 * 60 * 60 * 1000)
                });
            }
            
            // Sort by newest first
            allTransactions.sort((a, b) => b.timestamp - a.timestamp);
            
            // Save to localStorage
            saveTransactions();
        }
        
        // Save transactions to localStorage
        function saveTransactions() {
            localStorage.setItem('transaction_history', JSON.stringify(allTransactions));
        }
        
        // Add new transaction
        function addTransaction(type, productData, quantity, user = 'Current User') {
            const transaction = {
                id: `TRX-${String(allTransactions.length + 1).padStart(6, '0')}`,
                type: type,
                product: {
                    name: productData.name,
                    sku: productData.sku
                },
                quantity: quantity,
                stockBefore: productData.currentStock || 0,
                stockAfter: calculateNewStock(type, productData.currentStock || 0, quantity),
                user: user,
                timestamp: new Date()
            };
            
            allTransactions.unshift(transaction);
            saveTransactions();
            updateTransactionDisplay();
            
            return transaction;
        }
        
        // Calculate new stock based on transaction type
        function calculateNewStock(type, currentStock, quantity) {
            switch(type) {
                case 'stock-in':
                    return currentStock + quantity;
                case 'stock-out':
                case 'remove':
                    return Math.max(0, currentStock - quantity);
                case 'update':
                    return currentStock;
                default:
                    return currentStock;
            }
        }
        
        // Filter transactions by type (dropdown version)
        function filterByTypeSelect(type) {
            currentTransactionFilter = type;
            
            // Apply filter
            if (type === 'all') {
                filteredTransactions = [...allTransactions];
            } else {
                // Map filter values to transaction types
                const typeMap = {
                    'in': 'stock-in',
                    'out': 'stock-out',
                    'update': 'update',
                    'remove': 'remove'
                };
                filteredTransactions = allTransactions.filter(t => t.type === typeMap[type]);
            }
            
            updateTransactionDisplay();
        }
        
        // Legacy filter function (kept for compatibility)
        function filterByType(type) {
            filterByTypeSelect(type);
        }
        
        // Search transactions
        function searchTransactions() {
            const searchTerm = document.getElementById('search-transactions')?.value.toLowerCase() || '';
            
            if (!searchTerm) {
                filteredTransactions = currentTransactionFilter === 'all' 
                    ? [...allTransactions]
                    : allTransactions.filter(t => t.type === currentTransactionFilter);
            } else {
                filteredTransactions = allTransactions.filter(t => 
                    t.id.toLowerCase().includes(searchTerm) ||
                    t.product.name.toLowerCase().includes(searchTerm) ||
                    t.product.sku.toLowerCase().includes(searchTerm) ||
                    t.user.toLowerCase().includes(searchTerm)
                );
                
                // Apply type filter if active
                if (currentTransactionFilter !== 'all') {
                    const typeMap = {
                        'in': 'stock-in',
                        'out': 'stock-out',
                        'update': 'update',
                        'remove': 'remove'
                    };
                    filteredTransactions = filteredTransactions.filter(t => 
                        t.type === typeMap[currentTransactionFilter]
                    );
                }
            }
            
            updateTransactionDisplay();
        }
        
        // Update transaction display
        function updateTransactionDisplay() {
            const tbody = document.getElementById('trans-tbody');
            if (!tbody) return;
            
            // Update record count
            const countElement = document.getElementById('transaction-count');
            if (countElement) {
                countElement.textContent = `${filteredTransactions.length} Records`;
            }
            
            // Get pagination settings
            const perPage = parseInt(document.getElementById('trans-per-page')?.value || '10');
            const displayTransactions = filteredTransactions.slice(0, perPage);
            
            if (displayTransactions.length === 0) {
                tbody.innerHTML = `
                    <tr>
                        <td colspan="7" style="text-align: center; padding: 2rem; color: #9ca3af;">
                            No transactions found
                        </td>
                    </tr>`;
                return;
            }
            
            tbody.innerHTML = displayTransactions.map(createTransactionRow).join('');
        }
        
        // Create transaction row HTML
        function createTransactionRow(transaction) {
            const typeConfig = {
                'stock-in': { 
                    badge: 'stock-in', 
                    icon: 'arrow-down', 
                    text: 'Stock In', 
                    sign: '+',
                    color: 'positive'
                },
                'stock-out': { 
                    badge: 'stock-out', 
                    icon: 'arrow-up', 
                    text: 'Stock Out', 
                    sign: '-',
                    color: 'negative'
                },
                'update': { 
                    badge: 'updated', 
                    icon: 'edit', 
                    text: 'Updated', 
                    sign: '',
                    color: 'neutral'
                },
                'remove': { 
                    badge: 'removed', 
                    icon: 'trash', 
                    text: 'Removed', 
                    sign: '-',
                    color: 'negative'
                }
            };
            
            const config = typeConfig[transaction.type] || typeConfig['update'];
            const date = new Date(transaction.timestamp);
            const dateStr = date.toLocaleDateString('en-US', { 
                month: 'short', 
                day: 'numeric', 
                year: 'numeric' 
            });
            const timeStr = date.toLocaleTimeString('en-US', { 
                hour: '2-digit', 
                minute: '2-digit' 
            });
            
            return `
                <tr>
                    <td>${transaction.id}</td>
                    <td>
                        <div class="time-info">
                            <span class="date">${dateStr}</span>
                            <span class="time">${timeStr}</span>
                        </div>
                    </td>
                    <td>
                        <div class="product-info">
                            <span class="prod-name">${transaction.product.name}</span>
                            <span class="prod-sku">${transaction.product.sku}</span>
                        </div>
                    </td>
                    <td>
                        <span class="status-badge ${config.badge}">
                            <i class="fas fa-${config.icon}"></i> ${config.text}
                        </span>
                    </td>
                    <td class="qty-change ${config.color}">
                        ${config.sign}${transaction.quantity}
                    </td>
                    <td>
                        <span class="stock-before">${transaction.stockBefore}</span>
                        <i class="fas fa-arrow-right"></i>
                        <span class="stock-after">${transaction.stockAfter}</span>
                    </td>
                    <td>${transaction.user}</td>
                </tr>`;
        }
        
        // Export transactions to CSV
        function exportTransactions() {
            if (filteredTransactions.length === 0) {
                alert('No transactions to export');
                return;
            }
            
            // Create CSV content
            const headers = ['Transaction ID', 'Date', 'Time', 'Product', 'SKU', 'Type', 'Quantity', 'Stock Before', 'Stock After', 'User'];
            const rows = filteredTransactions.map(t => {
                const date = new Date(t.timestamp);
                return [
                    t.id,
                    date.toLocaleDateString(),
                    date.toLocaleTimeString(),
                    t.product.name,
                    t.product.sku,
                    t.type.toUpperCase().replace('-', ' '),
                    t.quantity,
                    t.stockBefore,
                    t.stockAfter,
                    t.user
                ];
            });
            
            const csv = [headers, ...rows].map(row => row.join(',')).join('\n');
            
            // Create download link
            const blob = new Blob([csv], { type: 'text/csv' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `transactions-${new Date().toISOString().split('T')[0]}.csv`;
            a.click();
            URL.revokeObjectURL(url);
            
            // Show success message
            alert('Transactions exported successfully!');
        }
        
        // Setup event listeners
        function setupTransactionListeners() {
            // Search input
            const searchInput = document.getElementById('search-transactions');
            if (searchInput) {
                searchInput.addEventListener('input', searchTransactions);
            }
        }
        
        // Initialize when the transactions section is shown
        document.addEventListener('DOMContentLoaded', function() {
            // Hook into the section display
            const originalShowSection = window.showSection;
            window.showSection = function(sectionId, event) {
                if (originalShowSection) {
                    originalShowSection(sectionId, event);
                }
                
                if (sectionId === 'transactions') {
                    initTransactionSystem();
                }
            };
        });
        
        // Public API for adding transactions from other parts of the app
        window.recordTransaction = function(type, productData, quantity, user) {
            return addTransaction(type, productData, quantity, user);
        };

        // ============= TAILOR MANAGEMENT FUNCTIONALITY =============
        
        // Modern Tab Navigation
        document.addEventListener('DOMContentLoaded', function() {
            // Initialize modern tab navigation
            const tabButtons = document.querySelectorAll('.modern-tab-btn');
            const tabContents = document.querySelectorAll('.modern-tab-content');
            
            tabButtons.forEach(button => {
                button.addEventListener('click', function() {
                    const targetTab = this.getAttribute('data-tab');
                    
                    // Remove active class from all buttons and contents
                    tabButtons.forEach(btn => btn.classList.remove('active'));
                    tabContents.forEach(content => content.classList.remove('active'));
                    
                    // Add active class to clicked button and corresponding content
                    this.classList.add('active');
                    document.getElementById(targetTab).classList.add('active');
                });
            });

            // Initialize tailor management
            initTailorManagement();
        });

        // Tailor Management Functions
        function initTailorManagement() {
            updateTailorStats();
            loadTailors();
            loadAssignments();
            loadFabrics();
            setupTailorEventListeners();
        }

        function updateTailorStats() {
            // Update stats from localStorage or API
            const tailors = JSON.parse(localStorage.getItem('tailors') || '[]');
            const assignments = JSON.parse(localStorage.getItem('assignments') || '[]');
            const fabrics = JSON.parse(localStorage.getItem('fabrics') || '[]');
            
            document.getElementById('total-tailors').textContent = tailors.filter(t => t.status === 'active').length;
            document.getElementById('pending-assignments').textContent = assignments.filter(a => a.status === 'pending').length;
            document.getElementById('fabric-types').textContent = [...new Set(fabrics.map(f => f.type))].length;
        }

        function setupTailorEventListeners() {
            // Tailor form submission
            const tailorForm = document.getElementById('tailor-form');
            if (tailorForm) {
                tailorForm.addEventListener('submit', function(e) {
                    e.preventDefault();
                    addTailor();
                });
            }

            // Assignment form submission
            const assignmentForm = document.getElementById('assignment-form');
            if (assignmentForm) {
                assignmentForm.addEventListener('submit', function(e) {
                    e.preventDefault();
                    createAssignment();
                });
            }

            // Fabric form submission
            const fabricForm = document.getElementById('fabric-form');
            if (fabricForm) {
                fabricForm.addEventListener('submit', function(e) {
                    e.preventDefault();
                    addFabric();
                });
            }

            // Search functionality
            const searchTailors = document.getElementById('search-tailors');
            if (searchTailors) {
                searchTailors.addEventListener('input', filterTailors);
            }

            const searchAssignments = document.getElementById('search-assignments');
            if (searchAssignments) {
                searchAssignments.addEventListener('input', filterAssignments);
            }

            const searchFabrics = document.getElementById('search-fabrics');
            if (searchFabrics) {
                searchFabrics.addEventListener('input', filterFabrics);
            }
        }

        function addTailor() {
            const formData = {
                id: Date.now(),
                name: document.getElementById('tailor-name').value,
                email: document.getElementById('tailor-email').value,
                phone: document.getElementById('tailor-contact').value,
                specialization: document.getElementById('tailor-specialization').value,
                status: 'active',
                createdAt: new Date().toISOString()
            };

            const tailors = JSON.parse(localStorage.getItem('tailors') || '[]');
            tailors.push(formData);
            localStorage.setItem('tailors', JSON.stringify(tailors));

            // Reset form
            document.getElementById('tailor-form').reset();
            
            // Reload data
            loadTailors();
            updateTailorStats();
            
            showNotification('Tailor registered successfully!', 'success');
        }

        function createAssignment() {
            const formData = {
                id: Date.now(),
                tailorId: document.getElementById('assignment-tailor').value,
                priority: document.getElementById('assignment-priority').value,
                garmentType: document.getElementById('garment-type').value,
                fabricType: document.getElementById('fabric-type').value,
                quantity: parseInt(document.getElementById('assignment-quantity').value),
                dueDate: document.getElementById('expected-date').value,
                notes: document.getElementById('assignment-notes').value,
                status: 'pending',
                createdAt: new Date().toISOString()
            };

            const assignments = JSON.parse(localStorage.getItem('assignments') || '[]');
            assignments.push(formData);
            localStorage.setItem('assignments', JSON.stringify(assignments));

            // Reset form
            document.getElementById('assignment-form').reset();
            
            // Reload data
            loadAssignments();
            updateTailorStats();
            
            showNotification('Work assignment created successfully!', 'success');
        }

        function addFabric() {
            const formData = {
                id: Date.now(),
                type: document.getElementById('fabric-type-input').value,
                color: document.getElementById('fabric-color').value,
                quantity: parseFloat(document.getElementById('fabric-quantity').value),
                width: document.getElementById('fabric-width').value,
                location: document.getElementById('fabric-location').value,
                supplier: document.getElementById('fabric-supplier').value,
                createdAt: new Date().toISOString()
            };

            const fabrics = JSON.parse(localStorage.getItem('fabrics') || '[]');
            fabrics.push(formData);
            localStorage.setItem('fabrics', JSON.stringify(fabrics));

            // Reset form
            document.getElementById('fabric-form').reset();
            
            // Reload data
            loadFabrics();
            updateTailorStats();
            
            showNotification('Fabric stock added successfully!', 'success');
        }

        function loadTailors() {
            const tailors = JSON.parse(localStorage.getItem('tailors') || '[]');
            const container = document.getElementById('tailors-list');
            
            if (tailors.length === 0) {
                container.innerHTML = `
                    <div style="text-align: center; padding: 3rem; color: #64748b;">
                        <i class="fas fa-user-tie" style="font-size: 3rem; margin-bottom: 1rem; opacity: 0.3;"></i>
                        <h3 style="margin: 0 0 0.5rem 0;">No tailors registered yet</h3>
                        <p style="margin: 0;">Add your first tailor using the form above.</p>
                    </div>
                `;
                return;
            }

            const tableHTML = `
                <table style="width: 100%; border-collapse: collapse;">
                    <thead style="background: #f8fafc; border-bottom: 1px solid #e2e8f0;">
                        <tr>
                            <th style="padding: 1rem; text-align: left; font-weight: 600;">Name</th>
                            <th style="padding: 1rem; text-align: left; font-weight: 600;">Specialization</th>
                            <th style="padding: 1rem; text-align: left; font-weight: 600;">Contact</th>
                            <th style="padding: 1rem; text-align: left; font-weight: 600;">Status</th>
                            <th style="padding: 1rem; text-align: left; font-weight: 600;">Actions</th>
                        </tr>
                    </thead>
                    <tbody>
                        ${tailors.map(tailor => `
                            <tr style="border-bottom: 1px solid #f1f5f9;">
                                <td style="padding: 1rem;">
                                    <div style="font-weight: 600;">${tailor.name}</div>
                                    <div style="font-size: 0.875rem; color: #64748b;">${tailor.email || 'No email'}</div>
                                </td>
                                <td style="padding: 1rem;">${tailor.specialization || 'General'}</td>
                                <td style="padding: 1rem;">${tailor.phone || 'N/A'}</td>
                                <td style="padding: 1rem;">
                                    <span style="padding: 0.25rem 0.75rem; border-radius: 9999px; font-size: 0.75rem; font-weight: 600; 
                                        ${tailor.status === 'active' ? 'background: #dcfce7; color: #166534;' : 'background: #fef3c7; color: #92400e;'}">
                                        ${tailor.status === 'active' ? 'Active' : 'Inactive'}
                                    </span>
                                </td>
                                <td style="padding: 1rem;">
                                    <button onclick="editTailor(${tailor.id})" style="margin-right: 0.5rem; padding: 0.25rem 0.5rem; border: none; background: #667eea; color: white; border-radius: 4px; font-size: 0.75rem; cursor: pointer;">
                                        <i class="fas fa-edit"></i>
                                    </button>
                                    <button onclick="deleteTailor(${tailor.id})" style="padding: 0.25rem 0.5rem; border: none; background: #ef4444; color: white; border-radius: 4px; font-size: 0.75rem; cursor: pointer;">
                                        <i class="fas fa-trash"></i>
                                    </button>
                                </td>
                            </tr>
                        `).join('')}
                    </tbody>
                </table>
            `;

            // Mobile card layout for very small screens
            const mobileCardsHTML = `
                <div class="mobile-card-layout">
                    ${tailors.map(tailor => `
                        <div class="mobile-card">
                            <div class="mobile-card-header">${tailor.name}</div>
                            <div class="mobile-card-content">
                                <div class="mobile-card-row">
                                    <span class="mobile-card-label">Email:</span>
                                    <span class="mobile-card-value">${tailor.email || 'N/A'}</span>
                                </div>
                                <div class="mobile-card-row">
                                    <span class="mobile-card-label">Phone:</span>
                                    <span class="mobile-card-value">${tailor.phone || 'N/A'}</span>
                                </div>
                                <div class="mobile-card-row">
                                    <span class="mobile-card-label">Specialization:</span>
                                    <span class="mobile-card-value">${tailor.specialization || 'General'}</span>
                                </div>
                                <div class="mobile-card-row">
                                    <span class="mobile-card-label">Status:</span>
                                    <span class="mobile-card-value">
                                        <span style="padding: 0.25rem 0.5rem; border-radius: 12px; font-size: 0.75rem; font-weight: 600; 
                                            ${tailor.status === 'active' ? 'background: #dcfce7; color: #166534;' : 'background: #fef3c7; color: #92400e;'}">
                                            ${tailor.status === 'active' ? 'Active' : 'Inactive'}
                                        </span>
                                    </span>
                                </div>
                            </div>
                            <div class="mobile-card-actions">
                                <button onclick="editTailor(${tailor.id})" class="btn btn-primary">
                                    <i class="fas fa-edit"></i> Edit
                                </button>
                                <button onclick="deleteTailor(${tailor.id})" class="btn" style="background: #ef4444; color: white;">
                                    <i class="fas fa-trash"></i> Delete
                                </button>
                            </div>
                        </div>
                    `).join('')}
                </div>
            `;
            
            container.innerHTML = tableHTML + mobileCardsHTML;
            
            // Update assignment tailor dropdown
            updateTailorDropdown();
        }

        function loadAssignments() {
            const assignments = JSON.parse(localStorage.getItem('assignments') || '[]');
            const tailors = JSON.parse(localStorage.getItem('tailors') || '[]');
            const container = document.getElementById('assignments-list');
            
            if (assignments.length === 0) {
                container.innerHTML = `
                    <div style="text-align: center; padding: 3rem; color: #64748b;">
                        <i class="fas fa-clipboard-list" style="font-size: 3rem; margin-bottom: 1rem; opacity: 0.3;"></i>
                        <h3 style="margin: 0 0 0.5rem 0;">No work assignments yet</h3>
                        <p style="margin: 0;">Create your first assignment using the form above.</p>
                    </div>
                `;
                return;
            }

            const tableHTML = `
                <table style="width: 100%; border-collapse: collapse;">
                    <thead style="background: #f8fafc; border-bottom: 1px solid #e2e8f0;">
                        <tr>
                            <th style="padding: 1rem; text-align: left; font-weight: 600;">Tailor</th>
                            <th style="padding: 1rem; text-align: left; font-weight: 600;">Garment</th>
                            <th style="padding: 1rem; text-align: left; font-weight: 600;">Quantity</th>
                            <th style="padding: 1rem; text-align: left; font-weight: 600;">Priority</th>
                            <th style="padding: 1rem; text-align: left; font-weight: 600;">Due Date</th>
                            <th style="padding: 1rem; text-align: left; font-weight: 600;">Status</th>
                        </tr>
                    </thead>
                    <tbody>
                        ${assignments.map(assignment => {
                            const tailor = tailors.find(t => t.id == assignment.tailorId);
                            const priorityColors = {
                                low: 'background: #f3f4f6; color: #374151;',
                                medium: 'background: #dbeafe; color: #1e40af;',
                                high: 'background: #fef3c7; color: #92400e;',
                                urgent: 'background: #fecaca; color: #991b1b;'
                            };
                            return `
                            <tr style="border-bottom: 1px solid #f1f5f9;">
                                <td style="padding: 1rem;">${tailor ? tailor.name : 'Unknown'}</td>
                                <td style="padding: 1rem;">
                                    <div style="font-weight: 600;">${assignment.garmentType}</div>
                                    <div style="font-size: 0.875rem; color: #64748b;">${assignment.fabricType}</div>
                                </td>
                                <td style="padding: 1rem;">${assignment.quantity}</td>
                                <td style="padding: 1rem;">
                                    <span style="padding: 0.25rem 0.75rem; border-radius: 9999px; font-size: 0.75rem; font-weight: 600; ${priorityColors[assignment.priority]}">
                                        ${assignment.priority.charAt(0).toUpperCase() + assignment.priority.slice(1)}
                                    </span>
                                </td>
                                <td style="padding: 1rem;">${assignment.dueDate || 'Not set'}</td>
                                <td style="padding: 1rem;">
                                    <span style="padding: 0.25rem 0.75rem; border-radius: 9999px; font-size: 0.75rem; font-weight: 600; background: #fef3c7; color: #92400e;">
                                        Pending
                                    </span>
                                </td>
                            </tr>
                        `;}).join('')}
                    </tbody>
                </table>
            `;

            // Mobile card layout for very small screens
            const mobileCardsHTML = `
                <div class="mobile-card-layout">
                    ${assignments.map(assignment => {
                        const tailor = tailors.find(t => t.id == assignment.tailorId);
                        const priorityColors = {
                            low: 'background: #f3f4f6; color: #374151;',
                            medium: 'background: #dbeafe; color: #1e40af;',
                            high: 'background: #fef3c7; color: #92400e;',
                            urgent: 'background: #fecaca; color: #991b1b;'
                        };
                        return `
                        <div class="mobile-card">
                            <div class="mobile-card-header">${assignment.garmentType} Assignment</div>
                            <div class="mobile-card-content">
                                <div class="mobile-card-row">
                                    <span class="mobile-card-label">Tailor:</span>
                                    <span class="mobile-card-value">${tailor ? tailor.name : 'Unknown'}</span>
                                </div>
                                <div class="mobile-card-row">
                                    <span class="mobile-card-label">Garment:</span>
                                    <span class="mobile-card-value">${assignment.garmentType}</span>
                                </div>
                                <div class="mobile-card-row">
                                    <span class="mobile-card-label">Fabric:</span>
                                    <span class="mobile-card-value">${assignment.fabricType}</span>
                                </div>
                                <div class="mobile-card-row">
                                    <span class="mobile-card-label">Quantity:</span>
                                    <span class="mobile-card-value">${assignment.quantity}</span>
                                </div>
                                <div class="mobile-card-row">
                                    <span class="mobile-card-label">Priority:</span>
                                    <span class="mobile-card-value">
                                        <span style="padding: 0.25rem 0.5rem; border-radius: 12px; font-size: 0.75rem; font-weight: 600; ${priorityColors[assignment.priority]}">
                                            ${assignment.priority.charAt(0).toUpperCase() + assignment.priority.slice(1)}
                                        </span>
                                    </span>
                                </div>
                                <div class="mobile-card-row">
                                    <span class="mobile-card-label">Due Date:</span>
                                    <span class="mobile-card-value">${assignment.dueDate || 'Not set'}</span>
                                </div>
                                <div class="mobile-card-row">
                                    <span class="mobile-card-label">Status:</span>
                                    <span class="mobile-card-value">
                                        <span style="padding: 0.25rem 0.5rem; border-radius: 12px; font-size: 0.75rem; font-weight: 600; background: #fef3c7; color: #92400e;">
                                            Pending
                                        </span>
                                    </span>
                                </div>
                            </div>
                        </div>
                    `;}).join('')}
                </div>
            `;
            
            container.innerHTML = tableHTML + mobileCardsHTML;
        }

        function loadFabrics() {
            const fabrics = JSON.parse(localStorage.getItem('fabrics') || '[]');
            const container = document.getElementById('fabrics-list');
            
            if (fabrics.length === 0) {
                container.innerHTML = `
                    <div style="text-align: center; padding: 3rem; color: #64748b;">
                        <i class="fas fa-cut" style="font-size: 3rem; margin-bottom: 1rem; opacity: 0.3;"></i>
                        <h3 style="margin: 0 0 0.5rem 0;">No fabric inventory yet</h3>
                        <p style="margin: 0;">Add your first fabric stock using the form above.</p>
                    </div>
                `;
                return;
            }

            const tableHTML = `
                <table style="width: 100%; border-collapse: collapse;">
                    <thead style="background: #f8fafc; border-bottom: 1px solid #e2e8f0;">
                        <tr>
                            <th style="padding: 1rem; text-align: left; font-weight: 600;">Type</th>
                            <th style="padding: 1rem; text-align: left; font-weight: 600;">Color</th>
                            <th style="padding: 1rem; text-align: left; font-weight: 600;">Quantity</th>
                            <th style="padding: 1rem; text-align: left; font-weight: 600;">Width</th>
                            <th style="padding: 1rem; text-align: left; font-weight: 600;">Location</th>
                            <th style="padding: 1rem; text-align: left; font-weight: 600;">Supplier</th>
                        </tr>
                    </thead>
                    <tbody>
                        ${fabrics.map(fabric => `
                            <tr style="border-bottom: 1px solid #f1f5f9;">
                                <td style="padding: 1rem; font-weight: 600;">${fabric.type}</td>
                                <td style="padding: 1rem;">${fabric.color || 'N/A'}</td>
                                <td style="padding: 1rem;">${fabric.quantity}m</td>
                                <td style="padding: 1rem;">${fabric.width}"</td>
                                <td style="padding: 1rem;">${fabric.location || 'N/A'}</td>
                                <td style="padding: 1rem;">${fabric.supplier || 'N/A'}</td>
                            </tr>
                        `).join('')}
                    </tbody>
                </table>
            `;

            // Mobile card layout for very small screens
            const mobileCardsHTML = `
                <div class="mobile-card-layout">
                    ${fabrics.map(fabric => `
                        <div class="mobile-card">
                            <div class="mobile-card-header">${fabric.type}</div>
                            <div class="mobile-card-content">
                                <div class="mobile-card-row">
                                    <span class="mobile-card-label">Color:</span>
                                    <span class="mobile-card-value">${fabric.color || 'N/A'}</span>
                                </div>
                                <div class="mobile-card-row">
                                    <span class="mobile-card-label">Quantity:</span>
                                    <span class="mobile-card-value">${fabric.quantity}m</span>
                                </div>
                                <div class="mobile-card-row">
                                    <span class="mobile-card-label">Width:</span>
                                    <span class="mobile-card-value">${fabric.width}"</span>
                                </div>
                                <div class="mobile-card-row">
                                    <span class="mobile-card-label">Location:</span>
                                    <span class="mobile-card-value">${fabric.location || 'N/A'}</span>
                                </div>
                                <div class="mobile-card-row">
                                    <span class="mobile-card-label">Supplier:</span>
                                    <span class="mobile-card-value">${fabric.supplier || 'N/A'}</span>
                                </div>
                            </div>
                        </div>
                    `).join('')}
                </div>
            `;
            
            container.innerHTML = tableHTML + mobileCardsHTML;
        }

        function updateTailorDropdown() {
            const tailors = JSON.parse(localStorage.getItem('tailors') || '[]');
            const dropdown = document.getElementById('assignment-tailor');
            
            dropdown.innerHTML = '<option value="">Choose a tailor</option>' +
                tailors.filter(t => t.status === 'active')
                    .map(tailor => `<option value="${tailor.id}">${tailor.name}</option>`)
                    .join('');
        }

        function filterTailors() {
            const searchTerm = document.getElementById('search-tailors').value.toLowerCase();
            const tailors = JSON.parse(localStorage.getItem('tailors') || '[]');
            // Implement filtering logic here
            loadTailors();
        }

        function filterAssignments() {
            const searchTerm = document.getElementById('search-assignments').value.toLowerCase();
            const assignments = JSON.parse(localStorage.getItem('assignments') || '[]');
            // Implement filtering logic here
            loadAssignments();
        }

        function filterFabrics() {
            const searchTerm = document.getElementById('search-fabrics').value.toLowerCase();
            const fabrics = JSON.parse(localStorage.getItem('fabrics') || '[]');
            // Implement filtering logic here
            loadFabrics();
        }

        function showNotification(message, type = 'info') {
            // Simple notification system
            const notification = document.createElement('div');
            notification.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                padding: 1rem 1.5rem;
                border-radius: 8px;
                color: white;
                font-weight: 600;
                z-index: 10000;
                ${type === 'success' ? 'background: #10b981;' : 'background: #6366f1;'}
                box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
            `;
            notification.textContent = message;
            
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.remove();
            }, 3000);
        }

        function exportTailors() {
            const tailors = JSON.parse(localStorage.getItem('tailors') || '[]');
            if (tailors.length === 0) {
                showNotification('No tailors to export', 'info');
                return;
            }
            
            const csv = 'Name,Email,Phone,Specialization,Status\n' +
                tailors.map(t => `${t.name},${t.email || ''},${t.phone || ''},${t.specialization || ''},${t.status}`).join('\n');
            
            const blob = new Blob([csv], { type: 'text/csv' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `tailors-${new Date().toISOString().split('T')[0]}.csv`;
            a.click();
            URL.revokeObjectURL(url);
            
            showNotification('Tailors exported successfully!', 'success');
        }
    </script>
</body>
</html>